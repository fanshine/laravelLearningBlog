<html>

	<head>
	    <meta charset="utf-8">
	    <title>
	    	 设计模式之装饰器模式 -  Laravel 知识整理
	    </title>
	    <meta name="description" content=" (Fanshine)">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="/theme/styles/styles.css">
		<link rel="stylesheet" href="/theme/styles/pygments.css">
		<link rel="stylesheet" href="/theme/styles/my.css">

		<script type="text/javascript" src="/js/jquery/jquery-1.8.0.min.js"></script>
		<script type="text/javascript">
			$(function(){

			});
		</script>

	</head>

	<body>
		<div id="wrapper">

			<div id="header">
				<ul id="extras-nav">
					<li><a href="/">博客</a></li>
					<li><a href="/archives.html">存档</a></li>
					<li><a href="/about.html">关于</a></li>
					<li><a href="/atom.xml" target="_blank" rel="nofollow">RSS</a></li>
				</ul>
				<h1><a id="title" href="/">Laravel 知识整理</a></h1>
			</div>


			<script type="text/javascript">
	$(document).ready(function(){
		$("#comments_trigger").toggle(
			function(){
				$("#comments_list").show();
				$("#comments_trigger").html("<b>隐藏评论</b>");
			},
			function(){
				$("#comments_list").hide();
				$("#comments_trigger").html("<b>显示评论</b>");
			}
		);
	});
</script>

<div id="content">
	<div class="text-post posts">

		<h2>设计模式之装饰器模式</h2>

		<div class="caption rich-content">

			<p>装饰模式属于结构性模式，它的意图是在一个对象的外围创建一个称为装饰器的封装，动态地给这个对象添加一些额外的功能。
装饰模式常用来替代继承，我们知道，继承可以解决很多实际的问题，但是继承缺少灵活性，在多重继承之后，你就知道维护你的代码有多麻烦；继承也容易引起类膨胀，需求变动或者扩展是常有的事情。而装饰模式可以用一种灵活的方式给类增加新的特性，它的重用性和扩展性也很不错。</p>

<p>先来看看通用代码：</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Component</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteComponent</span> <span class="kd">implements</span> <span class="n">Component</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Component.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>




<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Decorator</span> <span class="kd">implements</span> <span class="n">Component</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">Component</span> <span class="n">component</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Decorator</span><span class="o">(</span><span class="n">Component</span> <span class="n">component</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">component</span> <span class="o">=</span> <span class="n">component</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">component</span><span class="o">.</span><span class="na">behavior</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConcreteDecorator</span> <span class="kd">extends</span> <span class="n">Decorator</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">ConcreteDecorator</span><span class="o">(</span><span class="n">Component</span> <span class="n">component</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">component</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">behavior</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">behavior</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">addedBehavior</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addedBehavior</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ConcreteDecorator: Added Behavior.&quot;</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>


<p>客户端使用的时候，创建需要装饰的组件（Component），然后把该组件交给具体的装饰器（ConcreteDecorator）进行装饰一番，装饰之后的组件就用了新的特性。若是实现了多个装饰器，还可以进行多次装饰，每次都是把组件交给装饰器进行装饰，这样就能得到具有复杂功能的组件。具体代码如下：</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Component</span> <span class="n">component</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteComponent</span><span class="o">();</span>
        <span class="n">component</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ConcreteDecorator</span><span class="o">(</span><span class="n">component</span><span class="o">);</span>
        <span class="n">component</span><span class="o">.</span><span class="na">behavior</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>


<p>接下来对涉及到的四种角色做一个说明：</p>

<ol>
<li>Component：组件类接口，我们需要去装饰一个组件，这个即是我们需要去装饰的组件的接口。</li>
<li>ConcreteComponent：实现Component接口的具体组件类，它完成了基本的功能，但还需要继续扩展，扩展就由装饰器来做咯。</li>
<li>Decorator：抽象类装饰器，它一般不会完成任何功能，即用它装饰之后的组件没有有任何变化。</li>
<li>ConcreteDecorator：继承Decorator，实现具体的功能，如为需要装饰的组件增加特性，增加属性等。</li>
</ol>



		</div>

		<div class="meta">
			<p> ∞ 发布日期：2012-09-16 </p>
			<p> ∞ 发布目录：design-pattern </p>
			<p> ∞ 发布标签：Decorator</p>
			<p> ∞ 永久连接：http://fanshine.github.io/laravelLearningBlog//2012-09-16/decorator.html </p>
		</div>

		<div class="comments">
			<a id="comments_trigger" href="#comments" onclick="show_comments()"><b>显示评论</b></a>
			<div id="comments_list" style="display: none;">
				<hr/>
				<div id="bm_comments"></div>
				<script type="text/javascript">
					(function(){
					var script = document.createElement('script'); script.type = "text/javascript";
						script.src = "http://baye.me/script?key=f5ef00e2aa7c11e1b86412314303b429";
						(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
					})();
				</script>
			</div>
		</div>

	</div>
</div>



			<div id="footer">

				<div class="tag-search" style="display: none;">
					<form id="tag-form" action="/tag" method="get">
						<div class="search-text-wrapper">
							<input type="hidden" name="search" value="1">
							<input id="search-text" autocomplete="off" name="tag" class="search-text" type="text" value="">
							<label id="search-tip" style="display: block; ">搜索</label>
							<input id="search-btn" class="search-button" type="button" value="搜索">
						</div>
					</form>
				</div>

				<p>© 2012 Laravel 知识整理</p>
				<p>Powered by <a href="http://www.github.com" target="_blank">Github</a> and <a href="https://github.com/mojombo/jekyll" target="_blank">Jekyll</a> .</p>

			</div>
		</div>

	</body>
</html>